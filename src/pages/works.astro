---
import { Cards } from "src/components/Cards";
import BaseLayout from "src/layouts/BaseLayout.astro";
import { getVisuals } from "src/library/microcms";

const pageTitle = "photos";
const { year } = Astro.params;

const response = await getVisuals();

const visuals = response.contents.map((visual) => visual);
---

<BaseLayout pageTitle={`${pageTitle} in ${year}`}>
  {visuals.length === 0 && <p>No Contents</p>}

  <!-- TODO: 画像のフェッチが終わってない間、スケルトンスクリーンを表示する -->

  {
    visuals.length !== 0 && (
      <div class="wrapper">
        <Cards visuals={visuals} client:only="react" />
      </div>
    )
  }
</BaseLayout>

<style>
  .wrapper {
    display: flex;
    justify-content: center;
    margin-top: 24px;
  }
</style>
